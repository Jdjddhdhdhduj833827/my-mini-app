:root{
  --bg0:#05060a;
  --bg1:#0a0d16;
  --glass: rgba(255,255,255,.06);
  --stroke: rgba(255,255,255,.10);
  --text:#eaf0ff;
  --muted: rgba(234,240,255,.65);
  --muted2: rgba(234,240,255,.45);
  --accent:#4a7dff;
  --accent2:#7a3cff;
  --good:#18d38b;
  --bad:#ff4d6d;
  --shadow: 0 20px 60px rgba(0,0,0,.55);
  --radius: 22px;
  --radius2: 18px;
  --pad: 18px;
  --font: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", Inter, Arial, sans-serif;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background: radial-gradient(1100px 800px at 50% -80px, rgba(74,125,255,.30), transparent 55%),
              radial-gradient(900px 700px at 20% 10%, rgba(122,60,255,.28), transparent 55%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
}

.hidden{ display:none !important; }

.app{
  min-height:100%;
  padding: env(safe-area-inset-top) 14px env(safe-area-inset-bottom);
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 10px 8px 6px;
  opacity:.95;
}

.brand__title{
  font-weight: 800;
  letter-spacing: .8px;
}
.brand__sub{
  font-size: 12px;
  color: var(--muted2);
  margin-top:2px;
}

.iconBtn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.04);
  color: var(--text);
  width: 42px;
  height: 38px;
  border-radius: 14px;
  font-size: 22px;
  line-height: 1;
  cursor:pointer;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

.content{
  max-width: 430px;
  margin: 0 auto;
  padding: 8px 6px 18px;
}

.title{
  margin: 10px 0 18px;
  text-align:center;
  font-weight: 900;
  letter-spacing: 1.2px;
}

.panel{
  background: linear-gradient(180deg, rgba(20,25,40,.95), rgba(15,18,30,.92));
  border: 1px solid rgba(124,160,255,.18);
  border-radius: var(--radius);
  padding: var(--pad);
  box-shadow: 0 20px 60px rgba(74,125,255,.08);
}
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.panelResult{ margin-top: 14px
             ; }

.panel__title{
  font-weight: 800;
  letter-spacing: .4px;
  margin-bottom: 12px;
  color: rgba(234,240,255,.92);
}

.row{
  display:flex;
  gap:10px;
  align-items:center;
}

.select{
  position:relative;
  flex:1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 12px 12px;
  border-radius: 16px;
  background: rgba(0,0,0,.26);
  border: 1px solid rgba(255,255,255,.10);
  cursor:pointer;
  user-select:none;
}

.select.compact{ flex:0 0 108px; padding: 12px 10px; }

.select__left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}
.select__value{
  font-weight: 800;
  white-space:nowrap;
  overflow:hidden;
  text-overflow: ellipsis;
}
.badge{
  width: 30px; height: 30px;
  border-radius: 12px;
  display:grid;
  place-items:center;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
}

.chev{ color: rgba(234,240,255,.55); font-weight: 900; }

.btnGhost{
  background: linear-gradient(180deg, rgba(74,125,255,.20), rgba(122,60,255,.18));
  border: 1px solid rgba(124,160,255,.28);
}

.dropdown{
  position: absolute;
  left:0;
  right:0;
  top: calc(100% + 8px);
  padding: 8px;
  border-radius: 16px;
  background: rgba(18,20,28,.98);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 30px 70px rgba(0,0,0,.65);

  /* УБИРАЕМ BLUR */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;

  z-index: 9999;
  display:none;
}

.dropdown.open{
  display:block;
}

.dropdown.open{ display:block; }

.dropItem{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 12px;
  border-radius: 14px;
  color: rgba(234,240,255,.92);
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.06);
  margin-bottom: 8px;
  cursor:pointer;
}
.dropItem:last-child{ margin-bottom:0; }
.dropItem:hover{ border-color: rgba(74,125,255,.35); }

.hint{
  margin: 14px 2px 14px;
  padding: 14px 14px;
  border-radius: 18px;
  background: rgba(10,12,20,.55);
  border: 1px solid rgba(255,255,255,.10);
  color: rgba(234,240,255,.75);
}

.actions{ display:flex; }
.actions.two{ gap:10px; }
.btn{
  width:100%;
  padding: 14px 14px;
  border-radius: 18px;
  font-weight: 900;
  letter-spacing: .5px;
  border: 1px solid rgba(255,255,255,.14);
  cursor:pointer;
}

.btnPrimary{
  color: white;
  background: linear-gradient(90deg, rgba(74,125,255,.95), rgba(122,60,255,.95));
  box-shadow: 0 18px 55px rgba(74,125,255,.22);
  border-color: rgba(124,160,255,.30);
}

.btnLight{
  background: rgba(255,255,255,.12);
  color: rgba(234,240,255,.92);
}

.btnOutline{
  background: transparent;
  color: rgba(234,240,255,.86);
  border: 1px dashed rgba(255,255,255,.22);
}

.cardGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.card{
  background: rgba(0,0,0,.26);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: var(--radius2);
  padding: 12px 12px;
}
.card.wide{ grid-column: 1 / -1; }

.label{
  color: var(--muted2);
  font-size: 12px;
  margin-bottom: 6px;
}
.value{
  font-weight: 900;
  font-size: 16px;
}
.value.big{ font-size: 20px; letter-spacing:.6px; }

.dir{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight: 900;
}
.dirDot{
  width: 10px; height: 10px;
  border-radius: 99px;
  display:inline-block;
}
.dirDot.up{ background: var(--good); box-shadow: 0 0 18px rgba(24,211,139,.45); }
.dirDot.down{ background: var(--bad); box-shadow: 0 0 18px rgba(255,77,109,.45); }
.dirText{ font-size: 16px; }
.dirUntil{ color: rgba(234,240,255,.70); font-weight: 800; margin-left:auto; }

.progress{
  height: 12px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  overflow:hidden;
}
.progress__bar{
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(74,125,255,.95), rgba(122,60,255,.95));
  box-shadow: 0 0 20px rgba(74,125,255,.22);
}

.timer{
  margin-top: 8px;
  text-align:center;
  color: rgba(234,240,255,.68);
  font-weight: 800;
}

.footnote{
  margin-top: 10px;
  text-align:center;
  color: rgba(234,240,255,.45);
  font-size: 12px;
}
/* Backdrop: только затемнение, НЕ перекрывает меню */
.backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  opacity: 0;
  pointer-events: none;   /* ключевое */
  transition: opacity .18s ease;
  z-index: 40;            /* ниже dropdown */
}

.backdrop.show{
  opacity: 1;
  pointer-events: auto;   /* кликается только когда показан */
}

.select{ position: relative; } /* обязательно */

/* Dropdown поверх backdrop */
.dropdown{
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% + 8px);
  padding: 8px;
  border-radius: 16px;
  background: rgba(18,20,28,.98);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 30px 70px rgba(0,0,0,.65);
  z-index: 60;            /* выше backdrop */
  display: none;
}

.dropdown.open{ display: block; }
/* ===== Chart (premium) ===== */
.chartWrap{
  margin-top: 12px;
  padding: 14px;
  border-radius: 18px;
  background: rgba(18,20,28,.55);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 30px 70px rgba(0,0,0,.55);
}

.chartHead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom: 10px;
}

.chartTitle{
  font-weight: 900;
  letter-spacing: .08em;
  opacity: .95;
}

.chartMeta{
  font-size: 12px;
  opacity: .7;
}

.chartBox{
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(10,12,18,.75);
}

.chart{
  height: 220px;
  width: 100%;
}

/* ===== Analyze overlay (scan + shimmer) ===== */
.analyzeOverlay{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.45);
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  padding: 14px;
  z-index: 50;
}

.analyzeOverlay.hidden{ display:none; }

.analyzeText{
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  background: rgba(18,20,28,.55);
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.analyzeTitle{
  font-weight: 900;
  letter-spacing: .04em;
}

.analyzeSub{
  font-size: 12px;
  opacity: .75;
  margin-top: 4px;
}

/* scan line */
.scanLine{
  position:absolute;
  left:-30%;
  top:0;
  width: 60%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(124,160,255,.18), transparent);
  transform: skewX(-18deg);
  animation: scanMove 1.15s linear infinite;
  pointer-events:none;
}

@keyframes scanMove{
  from{ transform: translateX(-30%) skewX(-18deg); }
  to{ transform: translateX(220%) skewX(-18deg); }
}
.chartWrap { margin-bottom: 14px; }

.chartHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin: 14px 2px 10px;
}
.chartTitle{ font-weight: 800; }
.chartMeta{ font-size:12px; opacity:.8; }

.chartBox{
  position: relative;
  border-radius: 18px;
  overflow: hidden;
  background: rgba(18,20,28,.70);
  border: 1px solid rgba(255,255,255,.12);
}

.chart{
  height: 190px;   /* КЛЮЧ: без этого будет пусто */
  width: 100%;
}

/* overlay анализа */
.analyzeOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  padding: 14px;
  pointer-events:none;
  background: rgba(0,0,0,.15);
}
.scanLine{
  position:absolute;
  left:0; right:0;
  height:2px;
  top:0;
  background: rgba(124,160,255,.9);
  box-shadow: 0 0 18px rgba(124,160,255,.8);
  animation: scan 1.2s linear infinite;
}
@keyframes scan{
  0%{ transform: translateY(0); opacity:.2; }
  35%{ opacity:1; }
  100%{ transform: translateY(190px); opacity:.2; }
}
/* 1) hidden должен РЕАЛЬНО убирать элемент со страницы */
.hidden {
  display: none !important;
}/* 2) backdrop не должен ловить клики когда скрыт */
.backdrop.hidden {
  display: none !important;
  pointer-events: none !important;
}
