<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Trade Analytics</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="app">

    <header class="header">
      <div class="brand">
        <div class="brand__title">TRADE ANALYTICS</div>
        <div class="brand__sub">mini-app ‚Ä¢ research mode</div>
      </div>
      <button class="iconBtn" id="btnLang" title="Locale">üåê</button>
    </header>

    <main class="main">

      <!-- STEP 1: Instrument -->
      <section class="card" id="screen-instrument">
        <div class="h1">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</div>

        <div class="search">
          <div class="search__icon">‚åï</div>
          <input id="qInstrument" class="search__input" placeholder="Search..." autocomplete="off" />
        </div>

        <div class="label">–ö–ê–¢–ï–ì–û–†–ò–ò</div>
        <div class="chips" id="catChips"></div>

        <div class="list" id="instrumentList"></div>
      </section>

      <!-- STEP 2: Model + Expiry + Start -->
      <section class="card hidden" id="screen-setup">
        <div class="row">
          <div>
            <div class="label">–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</div>
            <button class="select" id="selInstrument">‚Äî</button>
          </div>
          <button class="iconBtn" id="btnBackToInstruments" title="–ù–∞–∑–∞–¥">‚Üê</button>
        </div>

        <div class="spacer"></div>

        <div class="label">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</div>
        <button class="select" id="selModel">‚Äî</button>

        <div class="spacer"></div>

        <div class="label">–í—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏</div>
        <button class="select" id="selExpiry">‚Äî</button>

        <div class="spacer"></div>

        <button class="primary" id="btnStart" disabled>–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑</button>

        <div class="note">
          ‚ö†Ô∏è –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –æ—Ü–µ–Ω–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è, –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—è.
        </div>
      </section>

      <!-- STEP 3: Pipeline -->
      <section class="card hidden" id="screen-pipeline">
        <div class="row between">
          <div class="row gap">
            <div class="dot"></div>
            <div class="h2">–°–∏–≥–Ω–∞–ª</div>
          </div>
          <div class="muted">–ú–æ–¥–µ–ª—å: <span id="pipeModel">‚Äî</span></div>
        </div>

        <div class="pipeline" id="pipeline">
          <div class="pipeStep" data-step="0">
            <div class="pipeTitle">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</div>
            <div class="pipeSub">–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ —É—Ä–æ–≤–Ω–∏ S/R</div>
            <div class="pipeState" aria-label="state"></div>
          </div>
          <div class="pipeStep" data-step="1">
            <div class="pipeTitle">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤</div>
            <div class="pipeSub">–¢—Ä–µ–Ω–¥—ã –∏ —Ñ–∏–≥—É—Ä—ã</div>
            <div class="pipeState"></div>
          </div>
          <div class="pipeStep" data-step="2">
            <div class="pipeTitle">–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á—ë—Ç—ã</div>
            <div class="pipeSub">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏ —Ä–∏—Å–∫–∏</div>
            <div class="pipeState"></div>
          </div>
          <div class="pipeStep" data-step="3">
            <div class="pipeTitle">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞</div>
            <div class="pipeSub">–§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞</div>
            <div class="pipeState"></div>
          </div>
        </div>

        <div class="progressWrap">
          <div class="progressBar"><div class="progressFill" id="progressFill"></div></div>
          <div class="muted center" id="progressText">0% ‚Ä¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</div>
        </div>
      </section>

      <!-- STEP 4: Result -->
      <section class="card hidden" id="screen-result">
        <div class="row between">
          <div class="row gap">
            <div class="dot"></div>
            <div class="h2">–°–∏–≥–Ω–∞–ª</div>
          </div>
          <div class="muted">–ú–æ–¥–µ–ª—å: <span id="resModel">‚Äî</span></div>
        </div>

        <div class="signal">
          <div class="signal__badge" id="signalDirBadge">‚Äî</div>
          <div class="signal__dir" id="signalDir">‚Äî</div>
        </div>

        <div class="grid2">
          <div class="kpi">
            <div class="kpi__label">–†–´–ù–û–ö</div>
            <div class="kpi__value" id="kMarket">OTC</div>
          </div>
          <div class="kpi">
            <div class="kpi__label">–£–í–ï–†–ï–ù–ù–û–°–¢–¨</div>
            <div class="kpi__value" id="kConf">‚Äî</div>
          </div>

          <div class="kpi">
            <div class="kpi__label">–í–†–ï–ú–Ø</div>
            <div class="kpi__value" id="kExpiry">‚Äî</div>
          </div>
          <div class="kpi">
            <div class="kpi__label">–°–ò–õ–ê</div>
            <div class="kpi__value" id="kStrength">‚Äî</div>
          </div>

          <div class="kpi">
            <div class="kpi__label">–ü–ê–†–ê</div>
            <div class="kpi__value" id="kPair">‚Äî</div>
          </div>
          <div class="kpi">
            <div class="kpi__label">–î–ï–ô–°–¢–í–£–ï–¢ –î–û</div>
            <div class="kpi__value" id="kUntil">‚Äî</div>
          </div>
        </div>

        <div class="grid2">
          <div class="kpi big">
            <div class="kpi__value" id="kAcc">‚Äî</div>
            <div class="kpi__label">–¢–û–ß–ù–û–°–¢–¨ (–æ—Ü–µ–Ω–∫–∞)</div>
          </div>
          <div class="kpi big">
            <div class="kpi__value" id="kVol">‚Äî</div>
            <div class="kpi__label">–û–ë–™–Å–ú</div>
          </div>
        </div>

        <div class="row gap">
          <button class="primary" id="btnRepeat">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
          <button class="ghost" id="btnReset">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>

        <div class="note">
          ‚ö†Ô∏è –ù–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Å–æ–≤–µ—Ç–æ–º. –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç.
        </div>
      </section>
    </main>

    <!-- Expiry modal -->
    <div class="modal hidden" id="expiryModal">
      <div class="modal__card">
        <div class="h1">–í—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏</div>
        <div class="expiryGrid" id="expiryGrid"></div>
        <button class="primary" id="btnCloseExpiry">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>

  </div>

  <script src="./app.js"></script>
</body>
</html>
